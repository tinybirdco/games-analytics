NODE results
SQL >

    %
    SELECT date, game, nick, sum(score) score FROM gameplays_by_date_game_player
    WHERE 1=1
    {% if not defined(date) %}
    AND date = toDate(now())
    {% else %}
    AND date = {{Date(date, '', description="Get only the ranking for this date")}}
    {% end %}
    {% if defined(game) %}
    AND game = {{Date(game, '', description="Get only the ranking for this game")}}
    {% end %}
    GROUP BY date, game, nick
    ORDER BY date desc, score desc


